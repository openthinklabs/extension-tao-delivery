{"version":3,"names":["define","$","_","__","module","router","feedback","loggerFactory","loadingBar","context","locale","logger","accessibilityLaunchKeyCodes","displayPermanentMessage","level","content","timeout","popup","getLTIErrorParameters","searchParams","URL","window","location","href","reduce","params","paramName","has","get","start","parameters","deliveryStarted","runDelivery","url","length","supportRTL","attr","dir","getLanguageDirection","config","messages","forEach","message","lti_errormsg","ltiErrorMsg","lti_errorlog","ltiErrorLog","error","launchDelivery","e","$elt","currentTarget","preventDefault","stopPropagation","hasClass","data","launch_url","on","includes","which","Array","isArray","extraRoutes","dispatch","hb","template","Handlebars","depth0","helpers","partials","program1","stack1","helper","buffer","launchButton","call","hash","escapeExpression","program3","options","helperMissing","program5","compilerInfo","merge","functionType","self","unless","fsSupported","inverse","noop","fn","program","modal","dialogTpl","$dialog","$body","d","document","dElem","documentElement","fs","changeInterval","isSupported","exitFullscreen","msExitFullscreen","mozCancelFullScreen","webkitExitFullscreen","requestFullscreen","msRequestFullscreen","mozRequestFullScreen","webkitRequestFullscreen","Element","ALLOW_KEYBOARD_INPUT","fullscreenchange","prefixes","i","fullScreen","fullscreenElement","mozFullScreen","webkitIsFullScreen","screen","availHeight","height","innerHeight","awaitFsChange","event","createEvent","initEvent","clearInterval","setInterval","dispatchEvent","handleUserInput","evt","type","keyCode","className","triggerResize","throttle","frame","getElementById","frameWindow","contentWindow","frame$","$win","trigger","init","body","addEventListener","replace","navigator","platform","toLowerCase","indexOf","querySelector","append","width","animate","disableClosing","startClosed","dialogAlert","logoutEvent","resizeMainFrame","outerHeight","$headerHeight","$footerHeight","$frameContainer","$frame","forceRepaint","$target","sel","style","display","offsetHeight","serviceApi","deliveryServerConfig","requireFullScreen","find","onFinish","finishDeliveryExecution","onExit","exitDeliveryExecution","setTimeout","stop","action","off","loadInto"],"sources":["../controller/DeliveryServer/index.js","../controller/routes.js","tpl!taoDelivery/tpl/fullscreen-modal-feedback","../controller/runtime/service/fullScreen.js","../controller/runtime/service/deliveryExecution.js","module-create.js"],"sourcesContent":["/*\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2016-2019 (original work) Open Assessment Technologies SA ;\n *\n */\n\n/**\n * The DeliveryServer/index controller.\n *\n * @author Bertrand Chevrier <bertrand@taotesting.com>\n */\ndefine('taoDelivery/controller/DeliveryServer/index',[\n    'jquery',\n    'lodash',\n    'i18n',\n    'module',\n    'core/router',\n    'ui/feedback',\n    'core/logger',\n    'layout/loading-bar',\n    'context',\n    'util/locale',\n    'url-polyfill'\n], function($, _, __, module, router, feedback, loggerFactory, loadingBar, context, locale){\n    'use strict';\n\n    const logger = loggerFactory('deliveryServer');\n\n    const accessibilityLaunchKeyCodes = [13, 32];  // \"enter\" or \"space\" - list of keys able to run delivery\n\n    /**\n     * Display a permanent message\n     * @param {String} level - in supported feedbacks' levels\n     * @param {String} content - the message to display\n     */\n    const displayPermanentMessage = (level, content) => {\n        if (level && content) {\n            feedback($('.permanent-feedback'))[level](content, {\n                timeout : -1,\n                popup : false\n            });\n        }\n    };\n\n    /**\n     * Extract standard LTI error parameters from query string\n     * @returns {Object} LTI error parameters\n     */\n    const getLTIErrorParameters = () => {\n        const { searchParams } = new URL(window.location.href);\n\n        return ['lti_errormsg', 'lti_errorlog'].reduce((params, paramName) => {\n            if (searchParams.has(paramName)) {\n                params[paramName] = searchParams.get(paramName);\n            }\n            return params;\n        }, {});\n    };\n\n    /**\n     * The DeliveryServer/index controller\n     */\n    return {\n\n        /**\n         * Controller entry point\n         * @param {Object} [parameters] - controller's data\n         * @param {Object} [parameters.messages] - message data to display\n         */\n        start(parameters){\n            let deliveryStarted = false;\n\n            /**\n             * Run/open the given delivery\n             * @param {String} url - the delivery URL\n             */\n            const runDelivery = function runDelivery (url) {\n\t        if (typeof url === 'string' && url.length !== 0) {\n                    deliveryStarted = true;\n                    loadingBar.start();\n                    window.location.href = url;\n                }\n            };\n\n            /**\n             * improve UI to support rtl languages\n             */\n            const supportRTL = function supportRTL () {\n                // adding attr for RTL languages\n                $('.delivery-scope').attr({dir: locale.getLanguageDirection(context.locale)});\n            };\n\n            const config = module.config();\n\n            // display as feedbacks any messages in parameters\n            if (parameters && parameters.messages) {\n                parameters.messages.forEach((message) => {\n                  displayPermanentMessage(message.level, message.content);\n                });\n            }\n\n            // display as feedbacks any LTI error messages from query string\n            const { lti_errormsg: ltiErrorMsg, lti_errorlog: ltiErrorLog } = getLTIErrorParameters();\n\n            if (ltiErrorMsg) {\n                displayPermanentMessage('error', ltiErrorMsg.length ? ltiErrorMsg : __('An error occurred!'));\n            };\n            if (ltiErrorLog) {\n                logger.error(ltiErrorLog);\n            };\n\n            const launchDelivery = function (e) {\n                const $elt = $(e.currentTarget);\n\n                e.preventDefault();\n                e.stopPropagation();\n\n                if (!deliveryStarted && !$elt.hasClass('disabled')) {\n                    runDelivery($elt.data().launch_url);\n                }\n            };\n\n            supportRTL();\n            $('.entry-point').on('click', launchDelivery);\n            $('.entry-point').on('keyup', (e) => {\n                if (accessibilityLaunchKeyCodes.includes(e.which)) {\n                    launchDelivery(e);\n                }\n            });\n\n            // dispatch any extra registered routes\n            if (config && Array.isArray(config.extraRoutes) && config.extraRoutes.length) {\n              router.dispatch(config.extraRoutes);\n            }\n        }\n    };\n});\n\n","/**\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2014 (original work) Open Assessment Technologies SA (under the project TAO-PRODUCT);\n * \n * \n */\n\n//@see http://forge.taotesting.com/projects/tao/wiki/Front_js\ndefine('taoDelivery/controller/routes',[],function(){\n    'use strict';\n\n    return {\n    };\n});\n\n","\ndefine('tpl!taoDelivery/tpl/fullscreen-modal-feedback', ['handlebars'], function(hb){ return hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, options, functionType=\"function\", escapeExpression=this.escapeExpression, helperMissing=helpers.helperMissing, self=this;\n\nfunction program1(depth0,data) {\n  \n  var buffer = \"\", stack1, helper;\n  buffer += \"(\";\n  if (helper = helpers.launchButton) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.launchButton); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \")\";\n  return buffer;\n  }\n\nfunction program3(depth0,data) {\n  \n  var buffer = \"\", helper, options;\n  buffer += \"\\n            <button class=\\\"btn-info small enter-full-screen\\\" type=\\\"button\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Enter full screen\", options) : helperMissing.call(depth0, \"__\", \"Enter full screen\", options)))\n    + \"</button>\\n            \";\n  return buffer;\n  }\n\nfunction program5(depth0,data) {\n  \n  var buffer = \"\", helper, options;\n  buffer += \"\\n            <button class=\\\"btn-info small close-full-screen-prompt\\\" type=\\\"button\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Close this prompt\", options) : helperMissing.call(depth0, \"__\", \"Close this prompt\", options)))\n    + \"</button>\\n            \";\n  return buffer;\n  }\n\n  buffer += \"<div class=\\\"modal-feedback modal full-screen-modal\\\">\\n    <div class=\\\"modal-body clearfix\\\">\\n        <p class=\\\"message\\\">\\n            \"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"This test needs to be taken in full screen mode\", options) : helperMissing.call(depth0, \"__\", \"This test needs to be taken in full screen mode\", options)))\n    + \"\\n            \";\n  stack1 = helpers.unless.call(depth0, (depth0 && depth0.fsSupported), {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n        </p>\\n        <div class=\\\"rgt\\\">\\n            \";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.fsSupported), {hash:{},inverse:self.program(5, program5, data),fn:self.program(3, program3, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n        </div>\\n    </div>\\n</div>\";\n  return buffer;\n  }); });\n","/*\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2015 (original work) Open Assessment Technologies SA;\n *\n */\n\n/**\n *\n * @author dieter <dieter@taotesting.com>\n */\ndefine('taoDelivery/controller/runtime/service/fullScreen',[\n    'jquery',\n    'lodash',\n    'i18n',\n    'ui/feedback',\n    'ui/modal',\n    'tpl!taoDelivery/tpl/fullscreen-modal-feedback'\n], function ($, _, __, feedback, modal, dialogTpl) {\n    'use strict';\n\n    var $dialog;\n    var $body;\n    var d = document;\n    var dElem = d.documentElement;\n\n    var fs = {\n        changeInterval: null,\n\n        isSupported: !!(d.exitFullscreen ||\n                        d.msExitFullscreen ||\n                        d.mozCancelFullScreen ||\n                        d.webkitExitFullscreen),\n\n        requestFullscreen: dElem.requestFullscreen ||\n                    dElem.msRequestFullscreen ||\n                    dElem.mozRequestFullScreen ||\n                    function() {\n                        dElem.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT);\n                    },\n\n                fullscreenchange: (function() {\n                    var prefixes = ['', 'ms', 'moz', 'webkit'],\n                        i = prefixes.length;\n                    while(i--) {\n                        if('on' + prefixes[i] + 'fullscreenchange' in dElem) {\n                            return prefixes[i] + 'fullscreenchange';\n                        }\n                    }\n                    return 'myfullscreenchange';\n                }()),\n\n        fullScreen: function() {\n            return !!(d.fullscreenElement || d.mozFullScreen || d.webkitIsFullScreen ||\n                        (screen.availHeight || screen.height - 30) <= window.innerHeight);\n        },\n\n        // on older browsers wait for a full screen change to happen\n        // and fire the change event manually\n        awaitFsChange : function() {\n            var event = d.createEvent('Event');\n            event.initEvent(fs.fullscreenchange, true, true);\n            clearInterval(fs.changeInterval);\n            fs.changeInterval = setInterval(function() {\n                if(!fs.fullScreen()) {\n                    d.dispatchEvent(event);\n                }\n            }, 2000);\n        }\n    };\n\n    /**\n     * React to user input on the prompt which is either\n     * key press or click on the button\n     *\n     * @param evt\n     */\n    var handleUserInput = function handleUserInput (evt) {\n\n        // full screen needs to be initiated by pressing\n        // F11 (Windows/Linux) or Ctrl+Cmd+F (Mac)\n        if(!fs.isSupported) {\n            $dialog.modal('close');\n            return;\n        }\n\n        // accept 'enter' as only valid key stroke\n        if(evt.type === 'keydown' && (evt.keyCode || evt.which) !== 13) {\n            return;\n        }\n\n        // in all other cases either 'enter' has been hit or the enter button has been clicked\n        fs.requestFullscreen.call(dElem);\n        dElem.className += ' fullscreen';\n        $dialog.modal('close');\n    };\n\n    /**\n     * Triggers a resize\n     */\n    var triggerResize = (function() {\n        return _.throttle(function() {\n            var frame = document.getElementById('iframeDeliveryExec');\n            var frameWindow = frame && frame.contentWindow;\n            var frame$ = frameWindow && frameWindow.$;\n            var $win = frame$ && frame$(frameWindow) || $(window);\n            $win.trigger('resize');\n        }, 250);\n    })();\n\n    /**\n     * Initialize full screen\n     */\n    var init = function init() {\n\n        $body = $(document.body);\n\n        // listen either to the native or the change event created in the observer above\n        document.addEventListener(fs.fullscreenchange, function() {\n            if(!fs.fullScreen()) {\n                dElem.className = dElem.className.replace(/\\bfullscreen\\b/, '');\n                $dialog.modal('open');\n            } else {\n                triggerResize();\n            }\n        });\n        if (!fs.isSupported) {\n            fs.awaitFsChange();\n        }\n\n        modal($body);\n        $dialog = $(dialogTpl({\n            fsSupported: fs.isSupported,\n            // while this is vague chances that any Mac browser gets here are very little\n            launchButton: navigator.platform.toLowerCase().indexOf('Mac') === 0 ? 'Ctrl+⌘+F' : 'F11'\n        }));\n\n        $dialog[0].querySelector('button').addEventListener('click', function(e) {\n            handleUserInput(e);\n        });\n\n        document.addEventListener('keydown', function(e) {\n            if(!fs.fullScreen()) {\n                handleUserInput(e);\n            }\n        });\n\n        $dialog.on('opened.modal', function() {\n            clearInterval(fs.changeInterval);\n        });\n\n        $dialog.on('closed.modal', function() {\n            if (!fs.isSupported) {\n                fs.awaitFsChange();\n                triggerResize();\n            }\n        });\n\n        $body.append($dialog);\n        \n        $dialog.modal({\n            width: 500,\n            animate: false,\n            disableClosing: true,\n            startClosed: true\n        });\n\n        // Note that when a page is on full screen already on load (after F5 normally)\n        // fullscreenElement and therefor fs.fullScreen() will report the wrong value!\n        if(false === ((screen.availHeight || screen.height - 30) <= window.innerHeight)) {\n            $dialog.modal('open');\n        }\n    };\n\n    /**\n     * @exports\n     */\n    return {\n        init: init\n    };\n});\n\n","/**\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2013 (original work) Open Assessment Technologies SA (under the project TAO-PRODUCT);\n *\n *\n */\ndefine('taoDelivery/controller/runtime/service/deliveryExecution',[\n    'lodash',\n    'jquery',\n    'taoDelivery/controller/runtime/service/fullScreen',\n    'layout/loading-bar',\n    'ui/dialog/alert',\n    'layout/logout-event'\n], function(_, $, fullScreen, loadingBar, dialogAlert, logoutEvent){\n    'use strict';\n\n    var $frameContainer,\n        $frame,\n        $headerHeight,\n        $footerHeight;\n\n    /**\n     * Forces a browser repaint\n     * Solution from http://stackoverflow.com/questions/3485365/how-can-i-force-webkit-to-redraw-repaint-to-propagate-style-changes?answertab=votes#tab-top\n     * @param {jQuery} $target\n     */\n    var forceRepaint = function($target) {\n        var sel = $target[0];\n        if (sel) {\n            sel.style.display = 'none';\n            sel.offsetHeight; // no need to store this anywhere, the reference is enough\n            sel.style.display = '';\n        }\n    };\n\n    function resizeMainFrame() {\n        var height = $(window).outerHeight() - $headerHeight - $footerHeight;\n        $frameContainer.height(height);\n        $frame.height(height);\n        forceRepaint($frameContainer);\n    }\n\n    return {\n        start: function(options){\n            var serviceApi = options.serviceApi;\n\n            if(!!options.deliveryServerConfig.requireFullScreen){\n                fullScreen.init();\n            }\n\n            $frameContainer = $('#outer-delivery-iframe-container');\n            $frame = $frameContainer.find('iframe');\n            $headerHeight = $('body > .content-wrap > header').outerHeight() || 0;\n            $footerHeight = $('body > footer').outerHeight() || 0;\n\n            $(document).on('serviceforbidden', function() {\n                logoutEvent();\n            });\n\n\n            serviceApi.onFinish(function() {\n                window.location = options.finishDeliveryExecution;\n            }).onExit(function() {\n                window.location = options.exitDeliveryExecution;\n            });\n\n            $(document)\n                .on('loading', function(e){\n                    loadingBar.start();\n                })\n                .on('unloading', function(){\n                    setTimeout(function(){\n                        loadingBar.stop();\n                    }, 300);\n                })\n                .on('messagealert', function(e, data) {\n                    if (data) {\n                        dialogAlert(data.message, data.action);\n                    }\n                })\n                .on('shutdown-com', function(){\n                    //use when we want to stop all exchange between frames\n                    $(document).off('heightchange');\n                    $frame.off('load.eventHeight')\n                           .off('load.cors');\n                });\n\n            serviceApi.loadInto($frame.get(0));\n\n            $(window).on('resize', _.throttle(function() {\n                resizeMainFrame();\n            }, 250));\n\n            resizeMainFrame();\n        }\n    };\n});\n\n","\ndefine(\"taoDelivery/loader/taoDelivery.bundle\", function(){});\n"],"mappings":"AAwBAA,MAAA,gDACA,SACA,SACA,OACA,SACA,cACA,cACA,cACA,qBACA,UACA,cACA,eACA,UAAAC,CAAA,CAAAC,CAAA,CAAAC,EAAA,CAAAC,MAAA,CAAAC,MAAA,CAAAC,QAAA,CAAAC,aAAA,CAAAC,UAAA,CAAAC,OAAA,CAAAC,MAAA,EACA,kBAEA,CAAAC,MAAA,CAAAJ,aAAA,mBAEAK,2BAAA,SAOAC,uBAAA,CAAAA,CAAAC,KAAA,CAAAC,OAAA,IACAD,KAAA,EAAAC,OAAA,EACAT,QAAA,CAAAL,CAAA,yBAAAa,KAAA,EAAAC,OAAA,EACAC,OAAA,IACAC,KAAA,GACA,EAEA,EAMAC,qBAAA,CAAAA,CAAA,IACA,MAAAC,YAAA,MAAAC,GAAA,CAAAC,MAAA,CAAAC,QAAA,CAAAC,IAAA,EAEA,sCAAAC,MAAA,EAAAC,MAAA,CAAAC,SAAA,IACAP,YAAA,CAAAQ,GAAA,CAAAD,SAAA,IACAD,MAAA,CAAAC,SAAA,EAAAP,YAAA,CAAAS,GAAA,CAAAF,SAAA,GAEAD,MAAA,CACA,IACA,EAKA,OAOAI,MAAAC,UAAA,EACA,IAAAC,eAAA,SAMA,CAAAC,WAAA,UAAAA,YAAAC,GAAA,EACA,iBAAAA,GAAA,MAAAA,GAAA,CAAAC,MAAA,GACAH,eAAA,IACAvB,UAAA,CAAAqB,KAAA,GACAR,MAAA,CAAAC,QAAA,CAAAC,IAAA,CAAAU,GAAA,CAEA,EAKAE,UAAA,UAAAA,WAAA,EAEAlC,CAAA,oBAAAmC,IAAA,EAAAC,GAAA,CAAA3B,MAAA,CAAA4B,oBAAA,CAAA7B,OAAA,CAAAC,MAAA,GACA,EAEA6B,MAAA,CAAAnC,MAAA,CAAAmC,MAAA,GAGAT,UAAA,EAAAA,UAAA,CAAAU,QAAA,EACAV,UAAA,CAAAU,QAAA,CAAAC,OAAA,CAAAC,OAAA,GACA7B,uBAAA,CAAA6B,OAAA,CAAA5B,KAAA,CAAA4B,OAAA,CAAA3B,OAAA,CACA,GAIA,MAAA4B,YAAA,CAAAC,WAAA,CAAAC,YAAA,CAAAC,WAAA,EAAA5B,qBAAA,GAEA0B,WAAA,EACA/B,uBAAA,SAAA+B,WAAA,CAAAV,MAAA,CAAAU,WAAA,CAAAzC,EAAA,wBACA,CACA2C,WAAA,EACAnC,MAAA,CAAAoC,KAAA,CAAAD,WAAA,EACA,CAEA,MAAAE,cAAA,SAAAA,CAAAC,CAAA,EACA,MAAAC,IAAA,CAAAjD,CAAA,CAAAgD,CAAA,CAAAE,aAAA,EAEAF,CAAA,CAAAG,cAAA,GACAH,CAAA,CAAAI,eAAA,GAEAtB,eAAA,EAAAmB,IAAA,CAAAI,QAAA,cACAtB,WAAA,CAAAkB,IAAA,CAAAK,IAAA,GAAAC,UAAA,CAEA,EAEArB,UAAA,GACAlC,CAAA,iBAAAwD,EAAA,SAAAT,cAAA,EACA/C,CAAA,iBAAAwD,EAAA,SAAAR,CAAA,GACArC,2BAAA,CAAA8C,QAAA,CAAAT,CAAA,CAAAU,KAAA,GACAX,cAAA,CAAAC,CAAA,CAEA,GAGAV,MAAA,EAAAqB,KAAA,CAAAC,OAAA,CAAAtB,MAAA,CAAAuB,WAAA,GAAAvB,MAAA,CAAAuB,WAAA,CAAA5B,MAAA,EACA7B,MAAA,CAAA0D,QAAA,CAAAxB,MAAA,CAAAuB,WAAA,CAEA,CACA,CACA,GChIA9D,MAAA,+CACA,aAEA,OACA,CACA,GCzBAA,MAAA,yEAAAgE,EAAA,SAAAA,EAAA,CAAAC,QAAA,UAAAC,UAAA,CAAAC,MAAA,CAAAC,OAAA,CAAAC,QAAA,CAAAd,IAAA,EAKA,SAAAe,SAAAH,MAAA,CAAAZ,IAAA,EAEA,IAAAgB,MAAA,CAAAC,MAAA,CAAAC,MAAA,IAMA,MALA,CAAAA,MAAA,OACAD,MAAA,CAAAJ,OAAA,CAAAM,YAAA,EAAAH,MAAA,CAAAC,MAAA,CAAAG,IAAA,CAAAR,MAAA,EAAAS,IAAA,IAAArB,IAAA,CAAAA,IAAA,IACAiB,MAAA,CAAAL,MAAA,EAAAA,MAAA,CAAAO,YAAA,CAAAH,MAAA,qBAAAC,MAAA,CAAAA,MAAA,CAAAG,IAAA,CAAAR,MAAA,EAAAS,IAAA,IAAArB,IAAA,CAAAA,IAAA,GAAAiB,MAAA,EACAC,MAAA,EAAAI,gBAAA,CAAAN,MAAA,EACA,IACAE,MACA,CAEA,SAAAK,SAAAX,MAAA,CAAAZ,IAAA,EAEA,IAAAiB,MAAA,CAAAO,OAAA,CAAAN,MAAA,IAIA,MAHA,CAAAA,MAAA,sFACAI,gBAAA,EAAAL,MAAA,CAAAJ,OAAA,CAAAjE,EAAA,EAAAgE,MAAA,EAAAA,MAAA,CAAAhE,EAAA,CAAA4E,OAAA,EAAAH,IAAA,IAAArB,IAAA,CAAAA,IAAA,EAAAiB,MAAA,CAAAA,MAAA,CAAAG,IAAA,CAAAR,MAAA,qBAAAY,OAAA,EAAAC,aAAA,CAAAL,IAAA,CAAAR,MAAA,0BAAAY,OAAA,IACA,0BACAN,MACA,CAEA,SAAAQ,SAAAd,MAAA,CAAAZ,IAAA,EAEA,IAAAiB,MAAA,CAAAO,OAAA,CAAAN,MAAA,IAIA,MAHA,CAAAA,MAAA,6FACAI,gBAAA,EAAAL,MAAA,CAAAJ,OAAA,CAAAjE,EAAA,EAAAgE,MAAA,EAAAA,MAAA,CAAAhE,EAAA,CAAA4E,OAAA,EAAAH,IAAA,IAAArB,IAAA,CAAAA,IAAA,EAAAiB,MAAA,CAAAA,MAAA,CAAAG,IAAA,CAAAR,MAAA,qBAAAY,OAAA,EAAAC,aAAA,CAAAL,IAAA,CAAAR,MAAA,0BAAAY,OAAA,IACA,0BACAN,MACA,CA/BA,KAAAS,YAAA,gBACAd,OAAA,MAAAe,KAAA,CAAAf,OAAA,CAAAF,UAAA,CAAAE,OAAA,EAAAb,IAAA,CAAAA,IAAA,KACA,IAAAgB,MAAA,CAAAC,MAAA,CAAAO,OAAA,CAAAN,MAAA,IAAAW,YAAA,YAAAP,gBAAA,MAAAA,gBAAA,CAAAG,aAAA,CAAAZ,OAAA,CAAAY,aAAA,CAAAK,IAAA,MAwCA,MATA,CAAAZ,MAAA,iJACAI,gBAAA,EAAAL,MAAA,CAAAJ,OAAA,CAAAjE,EAAA,EAAAgE,MAAA,EAAAA,MAAA,CAAAhE,EAAA,CAAA4E,OAAA,EAAAH,IAAA,IAAArB,IAAA,CAAAA,IAAA,EAAAiB,MAAA,CAAAA,MAAA,CAAAG,IAAA,CAAAR,MAAA,mDAAAY,OAAA,EAAAC,aAAA,CAAAL,IAAA,CAAAR,MAAA,wDAAAY,OAAA,IACA,iBACAR,MAAA,CAAAH,OAAA,CAAAkB,MAAA,CAAAX,IAAA,CAAAR,MAAA,CAAAA,MAAA,EAAAA,MAAA,CAAAoB,WAAA,EAAAX,IAAA,IAAAY,OAAA,CAAAH,IAAA,CAAAI,IAAA,CAAAC,EAAA,CAAAL,IAAA,CAAAM,OAAA,GAAArB,QAAA,CAAAf,IAAA,EAAAA,IAAA,CAAAA,IAAA,IACAgB,MAAA,MAAAA,MAAA,IAAAE,MAAA,EAAAF,MAAA,EACAE,MAAA,8DACAF,MAAA,CAAAH,OAAA,OAAAO,IAAA,CAAAR,MAAA,CAAAA,MAAA,EAAAA,MAAA,CAAAoB,WAAA,EAAAX,IAAA,IAAAY,OAAA,CAAAH,IAAA,CAAAM,OAAA,GAAAV,QAAA,CAAA1B,IAAA,EAAAmC,EAAA,CAAAL,IAAA,CAAAM,OAAA,GAAAb,QAAA,CAAAvB,IAAA,EAAAA,IAAA,CAAAA,IAAA,IACAgB,MAAA,MAAAA,MAAA,IAAAE,MAAA,EAAAF,MAAA,EACAE,MAAA,yCACAA,MACA,KCtBAzE,MAAA,sDACA,SACA,SACA,OACA,cACA,WACA,gDACA,UAAAC,CAAA,CAAAC,CAAA,CAAAC,EAAA,CAAAG,QAAA,CAAAsF,KAAA,CAAAC,SAAA,EACA,gBAEA,CAAAC,OAAA,CACAC,KAAA,CACAC,CAAA,CAAAC,QAAA,CACAC,KAAA,CAAAF,CAAA,CAAAG,eAAA,CAEAC,EAAA,EACAC,cAAA,MAEAC,WAAA,IAAAN,CAAA,CAAAO,cAAA,EACAP,CAAA,CAAAQ,gBAAA,EACAR,CAAA,CAAAS,mBAAA,EACAT,CAAA,CAAAU,oBAAA,EAEAC,iBAAA,CAAAT,KAAA,CAAAS,iBAAA,EACAT,KAAA,CAAAU,mBAAA,EACAV,KAAA,CAAAW,oBAAA,EACA,WACAX,KAAA,CAAAY,uBAAA,CAAAC,OAAA,CAAAC,oBAAA,CACA,EAEAC,gBAAA,gBACA,IAAAC,QAAA,0BACAC,CAAA,CAAAD,QAAA,CAAAhF,MAAA,CACAiF,CAAA,IACA,QAAAD,QAAA,CAAAC,CAAA,uBAAAjB,KAAA,CACA,OAAAgB,QAAA,CAAAC,CAAA,qBAGA,0BACA,IAEAC,UAAA,SAAAA,CAAA,EACA,SAAApB,CAAA,CAAAqB,iBAAA,EAAArB,CAAA,CAAAsB,aAAA,EAAAtB,CAAA,CAAAuB,kBAAA,EACA,CAAAC,MAAA,CAAAC,WAAA,EAAAD,MAAA,CAAAE,MAAA,MAAArG,MAAA,CAAAsG,WAAA,CACA,EAIAC,aAAA,SAAAA,CAAA,EACA,IAAAC,KAAA,CAAA7B,CAAA,CAAA8B,WAAA,UACAD,KAAA,CAAAE,SAAA,CAAA3B,EAAA,CAAAa,gBAAA,QACAe,aAAA,CAAA5B,EAAA,CAAAC,cAAA,EACAD,EAAA,CAAAC,cAAA,CAAA4B,WAAA,YACA7B,EAAA,CAAAgB,UAAA,IACApB,CAAA,CAAAkC,aAAA,CAAAL,KAAA,CAEA,MACA,CACA,EAQAM,eAAA,UAAAA,gBAAAC,GAAA,QAIA,CAAAhC,EAAA,CAAAE,WAAA,MAMA,YAAA8B,GAAA,CAAAC,IAAA,QAAAD,GAAA,CAAAE,OAAA,EAAAF,GAAA,CAAAzE,KAAA,IAKAyC,EAAA,CAAAO,iBAAA,CAAAhC,IAAA,CAAAuB,KAAA,EACAA,KAAA,CAAAqC,SAAA,gBACAzC,OAAA,CAAAF,KAAA,gBAZA,CAAAE,OAAA,CAAAF,KAAA,SAaA,EAKA4C,aAAA,YACA,OAAAtI,CAAA,CAAAuI,QAAA,eACA,CAAAC,KAAA,CAAAzC,QAAA,CAAA0C,cAAA,uBACAC,WAAA,CAAAF,KAAA,EAAAA,KAAA,CAAAG,aAAA,CACAC,MAAA,CAAAF,WAAA,EAAAA,WAAA,CAAA3I,CAAA,CACA8I,IAAA,CAAAD,MAAA,EAAAA,MAAA,CAAAF,WAAA,GAAA3I,CAAA,CAAAoB,MAAA,EACA0H,IAAA,CAAAC,OAAA,UACA,MACA,IAKAC,IAAA,UAAAA,KAAA,EAEAlD,KAAA,CAAA9F,CAAA,CAAAgG,QAAA,CAAAiD,IAAA,EAGAjD,QAAA,CAAAkD,gBAAA,CAAA/C,EAAA,CAAAa,gBAAA,YACAb,EAAA,CAAAgB,UAAA,GAIAoB,aAAA,IAHAtC,KAAA,CAAAqC,SAAA,CAAArC,KAAA,CAAAqC,SAAA,CAAAa,OAAA,sBACAtD,OAAA,CAAAF,KAAA,SAIA,GACAQ,EAAA,CAAAE,WAAA,EACAF,EAAA,CAAAwB,aAAA,GAGAhC,KAAA,CAAAG,KAAA,EACAD,OAAA,CAAA7F,CAAA,CAAA4F,SAAA,EACAN,WAAA,CAAAa,EAAA,CAAAE,WAAA,CAEA5B,YAAA,KAAA2E,SAAA,CAAAC,QAAA,CAAAC,WAAA,GAAAC,OAAA,6BACA,IAEA1D,OAAA,IAAA2D,aAAA,WAAAN,gBAAA,kBAAAlG,CAAA,EACAkF,eAAA,CAAAlF,CAAA,CACA,GAEAgD,QAAA,CAAAkD,gBAAA,oBAAAlG,CAAA,EACAmD,EAAA,CAAAgB,UAAA,IACAe,eAAA,CAAAlF,CAAA,CAEA,GAEA6C,OAAA,CAAArC,EAAA,2BACAuE,aAAA,CAAA5B,EAAA,CAAAC,cAAA,CACA,GAEAP,OAAA,CAAArC,EAAA,2BACA2C,EAAA,CAAAE,WAAA,GACAF,EAAA,CAAAwB,aAAA,GACAY,aAAA,GAEA,GAEAzC,KAAA,CAAA2D,MAAA,CAAA5D,OAAA,EAEAA,OAAA,CAAAF,KAAA,EACA+D,KAAA,KACAC,OAAA,IACAC,cAAA,IACAC,WAAA,GACA,GAIA,KAAAtC,MAAA,CAAAC,WAAA,EAAAD,MAAA,CAAAE,MAAA,MAAArG,MAAA,CAAAsG,WAAA,EACA7B,OAAA,CAAAF,KAAA,QAEA,EAKA,OACAqD,IAAA,CAAAA,IACA,CACA,GC7KAjJ,MAAA,6DACA,SACA,SACA,oDACA,qBACA,kBACA,sBACA,UAAAE,CAAA,CAAAD,CAAA,CAAAmH,UAAA,CAAA5G,UAAA,CAAAuJ,WAAA,CAAAC,WAAA,EACA,aAqBA,SAAAC,gBAAA,EACA,IAAAvC,MAAA,CAAAzH,CAAA,CAAAoB,MAAA,EAAA6I,WAAA,GAAAC,aAAA,CAAAC,aAAA,CACAC,eAAA,CAAA3C,MAAA,CAAAA,MAAA,EACA4C,MAAA,CAAA5C,MAAA,CAAAA,MAAA,EACA6C,YAAA,CAAAF,eAAA,CACA,IAxBA,CAAAA,eAAA,CACAC,MAAA,CACAH,aAAA,CACAC,aAAA,CAOAG,YAAA,SAAAA,CAAAC,OAAA,EACA,IAAAC,GAAA,CAAAD,OAAA,IACAC,GAAA,GACAA,GAAA,CAAAC,KAAA,CAAAC,OAAA,QACAF,GAAA,CAAAG,YAAA,CACAH,GAAA,CAAAC,KAAA,CAAAC,OAAA,IAEA,EASA,OACA9I,KAAA,SAAAA,CAAAkD,OAAA,EACA,IAAA8F,UAAA,CAAA9F,OAAA,CAAA8F,UAAA,CAEA,CAAA9F,OAAA,CAAA+F,oBAAA,CAAAC,iBAAA,EACA3D,UAAA,CAAA6B,IAAA,GAGAoB,eAAA,CAAApK,CAAA,qCACAqK,MAAA,CAAAD,eAAA,CAAAW,IAAA,WACAb,aAAA,CAAAlK,CAAA,kCAAAiK,WAAA,MACAE,aAAA,CAAAnK,CAAA,kBAAAiK,WAAA,MAEAjK,CAAA,CAAAgG,QAAA,EAAAxC,EAAA,+BACAuG,WAAA,EACA,GAGAa,UAAA,CAAAI,QAAA,YACA5J,MAAA,CAAAC,QAAA,CAAAyD,OAAA,CAAAmG,uBACA,GAAAC,MAAA,YACA9J,MAAA,CAAAC,QAAA,CAAAyD,OAAA,CAAAqG,qBACA,GAEAnL,CAAA,CAAAgG,QAAA,EACAxC,EAAA,oBAAAR,CAAA,EACAzC,UAAA,CAAAqB,KAAA,EACA,GACA4B,EAAA,wBACA4H,UAAA,YACA7K,UAAA,CAAA8K,IAAA,EACA,MACA,GACA7H,EAAA,yBAAAR,CAAA,CAAAM,IAAA,EACAA,IAAA,EACAwG,WAAA,CAAAxG,IAAA,CAAAb,OAAA,CAAAa,IAAA,CAAAgI,MAAA,CAEA,GACA9H,EAAA,2BAEAxD,CAAA,CAAAgG,QAAA,EAAAuF,GAAA,iBACAlB,MAAA,CAAAkB,GAAA,qBACAA,GAAA,aACA,GAEAX,UAAA,CAAAY,QAAA,CAAAnB,MAAA,CAAA1I,GAAA,KAEA3B,CAAA,CAAAoB,MAAA,EAAAoC,EAAA,UAAAvD,CAAA,CAAAuI,QAAA,YACAwB,eAAA,EACA,QAEAA,eAAA,EACA,CACA,CACA,GC5GAjK,MAAA"}